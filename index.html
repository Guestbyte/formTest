<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Patricia Grams - La Escala de Compasión (EC)</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/vuetify@2.5.14/dist/vuetify.min.css">
  <script src="https://cdn.jsdelivr.net/npm/vue@2.6.14/dist/vue.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/vuetify@2.5.14/dist/vuetify.js"></script>
</head>

<body>
  <div id="app">
    <v-app>
      <v-container>
        <v-col cols="10" align-self="center">
          <v-card>
            <v-img
              src="https://media.licdn.com/dms/image/C4E16AQFNiisnXfdWrQ/profile-displaybackgroundimage-shrink_350_1400/0/1656328382114?e=1712793600&v=beta&t=m2xpF4PfzswHMI8P8vqylXo-F4G7MBoc53oDOUdXQ_U"
              max-height="325" class="bg-grey-lighten-2"></v-img>
          </v-card>
          <br>
          <v-card>
            <v-card-text>
              La Escala de Compasión (EC)
              <br />
              Instrucciones: Por favor, lee cada afirmación cuidadosamente antes de responder. Responde de acuerdo a
              lo
              que realmente refleja tu experiencia en lugar de lo que crees que debería ser tu experiencia. Indica con
              qué
              frecuencia te comportas de la manera indicada, utilizando la siguiente escala:
            </v-card-text>
          </v-card>
          <v-form v-model="form.valid">
            <v-container>
              <v-container fluid grid-list-md>
                <v-row>
                  <v-col cols="4" sm="4">
                    <v-text-field v-model="form.name" label="Nombre" required :rules="[rules.minChars]"></v-text-field>
                  </v-col>
                  <v-col cols="4" sm="4">
                    <v-select v-model="form.age" :items="form.ageOptions" label="Edad" required></v-select>
                  </v-col>
                  <v-col cols="4" sm="4">
                    <v-select v-model="form.gender" :items="form.genders" label="Género" required></v-select>
                  </v-col>
                </v-row>
                <v-row>
                  <v-col cols="4" sm="4">
                    <v-text-field v-model="form.industry" label="Industria" required></v-text-field>
                  </v-col>
                  <v-col cols="4" sm="4">
                    <v-select v-model="form.companySize" :items="form.sizes" label="Tamaño de la Empresa" required></v-select>
                  </v-col>
                  <v-col cols="4" sm="4">
                    <v-select v-model="form.continent" :items="form.continents" label="Continente" required></v-select>
                  </v-col>
                </v-row>
              </v-container>
              <v-row v-for="(question, index) in form.questions" :key="index">
                <v-col>
                  <v-card>
                    <v-card-text>{{ question }}</v-card-text>
                    <v-card-actions class="d-flex">
                      <v-radio-group v-model="form.answers[index]" row>
                        <v-radio label="1 - Casi nunca" value="1" color="primary" class="mr-4"></v-radio>
                        <v-radio label="2" value="2" color="primary" class="mr-4"></v-radio>
                        <v-radio label="3" value="3" color="primary" class="mr-4"></v-radio>
                        <v-radio label="4" value="4" color="primary" class="mr-4"></v-radio>
                        <v-radio label="5 - Casi siempre" value="5" color="primary" class="mr-4"></v-radio>
                      </v-radio-group>
                    </v-card-actions>
                  </v-card>
                </v-col>
              </v-row>
              <br>
              <v-btn @click="submitForm" :disabled="form.loading" color="primary">{{ form.loading ? 'Enviando...' : 'Enviar'
                }}</v-btn>
              <v-progress-circular v-if="form.loading" indeterminate color="primary"></v-progress-circular>
              <p v-if="form.successMessage">{{ form.successMessage }}</p>
            </v-container>
          </v-form>
          <v-card>
            <v-card-text style="font-size: 12px;">
              Reference: Pommier, E., Neff, K. D. & Tóth-Király I. (2019). The development and validation of the
              Compassion Scale. Assessment, 21-39.
            </v-card-text>
          </v-card>
      </v-container>
    </v-app>
  </div>

  <script>
    new Vue({
      el: '#app',
      vuetify: new Vuetify(),
      data() {
        return {
          form: {
            answers: Array(16).fill(0),
            scriptUrl: 'https://script.google.com/macros/s/AKfycbzFwFkxH8KtZ1xciZ3x3wMpP0X7PWOS1l7mvpSJItd9J23gtPZAXmDBhwztGFtPmBVk/exec',
            loading: false,
            successMessage: '',
            questions: [
              "Presto mucha atención cuando otras personas me hablan sobre sus problemas.",
              "Si veo a alguien pasando por un momento difícil, intento ser comprensivo con esa persona.",
              "No me preocupo por los problemas de otras personas.",
              "Me doy cuenta de que todos nos sentimos deprimidos a veces, es parte de ser humano.",
              "Me doy cuenta cuando la gente está molesta, incluso si no dicen nada.",
              "Me gusta estar ahí para los demás en tiempos de dificultad.",
              "Pienso poco en las preocupaciones de los demás.",
              "Siento que es importante reconocer que todas las personas tienen debilidades y nadie es perfecto.",
              "Escucho pacientemente cuando la gente me cuenta sus problemas.",
              "Mi corazón se conmueve por las personas que están infelices.",
              "Intento evitar a las personas que están experimentando mucho dolor.",
              "Siento que el sufrimiento es solo una parte de la experiencia humana común.",
              "Cuando la gente me cuenta sus problemas, intento mantener una perspectiva equilibrada sobre la situación.",
              "Cuando otros sienten tristeza, intento consolarlos.",
              "No puedo conectar realmente con otras personas cuando están sufriendo.",
              "A pesar de mis diferencias con los demás, sé que todos sienten dolor igual que yo.",
            ],
            valid: false,
            name: '',
            age: null,
            ageOptions: Array.from({ length: 82 }, (value, index) => index + 18),
            gender: '',
            industry: '',
            companysize: '',
            continent: '',
            continents: [
              'Europa',
              'Asia',
              'África',
              'América del Norte',
              'América del Sur',
              'Oceanía',
              'Antártida'
            ],
            sizes: [
              '1-10 empleados',
              '11-50 empleados',
              '51-200 empleados',
              '201-500 empleados',
              '501-1000 empleados',
              'Más de 1000 empleados',
            ],
            genders: ['Masculino', 'Femenino', 'Otro'],
          },
          rules: {
            minChars: value => value.length >= 3 || 'Mínimo 3 caracteres',
          }
        };
      },
      methods: {
        submitForm() {
          if (!this.form.valid) {
            this.form.successMessage = 'Por favor, rellena el formulario correctamente!';
            return;
          }
          console.table('Submitting form:', this.form);
          this.form.loading = true;
          const formData = new FormData();
          formData.append('Name', this.form.name);
          formData.append('Gender', this.form.gender);
          formData.append('Age', this.form.age);
          formData.append('Industry', this.form.industry);
          formData.append('Company Size', this.form.companySize);
          formData.append('Continent', this.form.continent);
          this.form.answers.forEach((answer, index) => {
            formData.append(`answer${index + 1}`, answer);
          });

          fetch(this.form.scriptUrl, { method: 'POST', body: formData })
            .then(response => response.json())
            .then(data => {
              this.form.successMessage = '¡Formulario enviado con éxito!';
              this.form.loading = false;
            })
            .catch(error => {
              console.error('Error submitting form:', error);
              this.form.loading = false;
            });
        },
      },
    });
  </script>
</body>

</html>